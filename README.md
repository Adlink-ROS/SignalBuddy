![](images/banner.gif)
# SignalBuddy
<p align="center"><img src="images/SignalBuddy3D.gif" width="300" height="300"></p>

`SignalBuddy` is an easy-to-make, easy-to-use signal generator for scientific applications. Making friends is hard, but making `SignalBuddy` is easy - all you need is an Arduino Uno! Little to no soldering is required. `SignalBuddy` replaces more complicated and (much) more expensive signal generators in laboratory settings where one millisecond resolution is sufficient. `SignalBuddy` can:

* generate **sin waves**, **step functions**, and **pulse trains**
* generate **DIGITAL** and **PWM** signals, in addition to **TRUE ANALOG** signals when used with the optional [MCP4725 Chip](https://www.adafruit.com/product/935)  
* be controlled with an intuitive serial monitor interface
* look fabulous is an optional 3D printed enclosure

Here are recordings of signals generated by SignalBuddy:

<p align="center"><img src="images/recording.png" height="500"></p>

## quick start
* Download this repository, open `SignalBuddy.ino` in the `SignalBuddy` folder, and [upload it to an Arduino Uno using the Arduino IDE](https://www.arduino.cc/en/main/howto).
* Open the Serial Monitor by clicking the button in the top right of the IDE (1). Make sure the line ending dropdown is set to 'Newline' (2), and that the baud rate is set to 115200 (3).<br/><br/>![](images/serial_monitor.png)<br/><br/>
* Enter **a number** to change the preset, **s** to deliver a signal, and **m** to print the menu. Preset settings can be adjusted by entering the letters in parentheses. For example, enter **a** to change the amplitude, **p** to change the ramp up time, and **f** to change the frequency of the currently selected stimulus.
* The PWM / digital signal comes out of **PIN 11**. To visualize the signals, put a resistor (~100 ohm) + LED between pin 11 and ground. Connect the long leg of the LED to pin 11, and the short leg to ground:<br/>![](images/arduino_led.png)

## true analog output
The amplitude of pin 11 output is modulated using [Pulse Width Modulation (PWM)](https://www.arduino.cc/en/tutorial/PWM) - basically, the output oscillates rapidly between 0 and 5 volts to approximate voltage between 0 and 5. `SignalBuddy` can generate true analog output when used with the [MCP4725 Chip](https://www.adafruit.com/product/935). Simply wire things up like this:<br/>![](images/arduino_mcp475.png)

Now the **VOUT** pin outputs an analog version of the signal. Notice that the PWM output can be used simultaneously. In my experiments I used the PWM output to drive a reference LED that is captured in a video feed, while the analog output drives a laser for optogenetics experiments.

## external triggering
Signals can be triggered by an external TTL input (a 5V pulse) to **PIN 2**. Simply change the `externalTrigger` parameter in `config.h` to `true`. Now the currently selected preset will be delivered when the input on pin 2 changes from 0 to 5 volts.

## custom presets
You can change or add up to 9 presets by modifying `config.h`. Re-upload `SignalBuddy.ino` once you are done and the new presets will appear in the serial menu.

## project box
under construction

## how the code works
under construction
